<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="group_education_user" model="res.groups">
        <field name="name">User</field>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        <field name="category_id" ref="education_core.module_category_education"/>
    </record>
    <record id="group_education_student" model="res.groups">
        <field name="name">Student</field>
        <field name="implied_ids" eval="[(4, ref('group_education_user'))]"/>
        <field name="category_id" ref="education_core.module_category_education"/>
    </record>
    <record id="group_education_teacher" model="res.groups">
        <field name="name">Teacher</field>
        <field name="implied_ids" eval="[(4, ref('group_education_user'))]"/>
        <field name="category_id" ref="education_core.module_category_education"/>
    </record>
    <record id="group_education_teacher_dc" model="res.groups">
        <field name="name">Department Chair</field>
        <field name="implied_ids" eval="[(4, ref('group_education_teacher'))]"/>
        <field name="category_id" ref="education_core.module_category_education"/>
    </record>

    <record id="education_core.group_education_faculty" model="res.groups">
        <field name="implied_ids" eval="[(4, ref('group_education_user'))]"/>
    </record>

    <record id="group_education_aa" model="res.groups">
        <field name="name">Academic Affairs</field>
        <field name="implied_ids" eval="[(4, ref('education_core.group_education_faculty'))]"/>
        <field name="category_id" ref="education_core.module_category_education"/>
    </record>
    <record id="group_education_haa" model="res.groups">
        <field name="name">Head of Academic Affairs</field>
        <field name="implied_ids" eval="[(4, ref('group_education_aa'))]"/>
        <field name="category_id" ref="education_core.module_category_education"/>
    </record>
    <record id="group_education_sa" model="res.groups">
        <field name="name">Staff Affairs</field>
        <field name="implied_ids" eval="[(4, ref('education_core.group_education_faculty'))]"/>
        <field name="category_id" ref="education_core.module_category_education"/>
    </record>
    <record id="group_education_hsa" model="res.groups">
        <field name="name">Head of Staff Affairs</field>
        <field name="implied_ids" eval="[(4, ref('group_education_sa'))]"/>
        <field name="category_id" ref="education_core.module_category_education"/>
    </record>
    <record id="group_education_fs" model="res.groups">
        <field name="name">Finance Staff</field>
        <field name="implied_ids" eval="[(4, ref('education_core.group_education_faculty'))]"/>
        <field name="category_id" ref="education_core.module_category_education"/>
    </record>
     <record id="group_education_hfs" model="res.groups">
        <field name="name">Head of Finance</field>
        <field name="implied_ids" eval="[(4, ref('group_education_fs'))]"/>
        <field name="category_id" ref="education_core.module_category_education"/>
    </record>

    <record id="education_core.group_education_hod" model="res.groups">
        <field name="implied_ids" eval="[(4, ref('group_education_haa'))]"/>
    </record>
    <record id="education_core.group_education_hod" model="res.groups">
        <field name="implied_ids" eval="[(4, ref('group_education_hsa'))]"/>
    </record>
    <record id="education_core.group_education_hod" model="res.groups">
        <field name="implied_ids" eval="[(4, ref('group_education_hfs'))]"/>
    </record>
    <record id="education_core.group_education_principal" model="res.groups">
        <field name="implied_ids" eval="[(4, ref('group_education_teacher_dc'))]"/>
    </record>

    <!-- Set domain to same department for Teachers -->
    <record id="teacher_class_request_rule" model="ir.rule">
        <field name="name">Teacher class request</field>
        <field name="model_id" ref="model_education_class_division"/>
        <field name="groups" eval="[(4, ref('group_education_teacher'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
        <field name="domain_force">[('class_id.major_id','in',user.employee_ids.department_id.ids)]</field>
    </record>
    
    <!-- Set domain for timetable (teacher)-->
    <record id="teacher_timetable_request_rule" model="ir.rule">
        <field name="name">Teacher timetable request</field>
        <field name="model_id" ref="model_education_timetable"/>
        <field name="groups" eval="[(4, ref('group_education_teacher'))]"/>
        <field name="domain_force">[('class_division.class_id.major_id','in',user.employee_ids.department_id.ids)]</field>
    </record>
    <record id="teacher_timetable_schedule_request_rule" model="ir.rule">
        <field name="name">Teacher timetable schedule request</field>
        <field name="model_id" ref="model_education_timetable_schedule"/>
        <field name="groups" eval="[(4, ref('group_education_teacher'))]"/>
        <field name="domain_force">[('faculty_id.employee_id','=', user.employee_ids.id)]</field>
    </record> 

    <!-- Set domain for exam (teacher)-->
    <record id="teacher_exam_request_rule" model="ir.rule">
        <field name="name">Teacher exam request</field>
        <field name="model_id" ref="model_education_exam"/>
        <field name="groups" eval="[(4, ref('group_education_teacher'))]"/>
        <field name="domain_force">[('class_id.major_id','in',user.employee_ids.department_id.ids)]</field>
    </record>
    <record id="teacher_exam_valuation_request_rule" model="ir.rule">
        <field name="name">Teacher exam valuation request</field>
        <field name="model_id" ref="model_education_exam_valuation"/>
        <field name="groups" eval="[(4, ref('group_education_teacher'))]"/>
        <field name="domain_force">[('class_id.major_id','in',user.employee_ids.department_id.ids)]</field>
    </record>
    <record id="teacher_exam_results_request_rule" model="ir.rule">
        <field name="name">Teacher exam result request</field>
        <field name="model_id" ref="model_education_exam_results"/>
        <field name="groups" eval="[(4, ref('group_education_teacher'))]"/>
        <field name="domain_force">[('class_id.major_id','in',user.employee_ids.department_id.ids)]</field>
    </record>

    <!-- Set domain for student list-->
    <record id="department_teacher_request_rule" model="ir.rule">
        <field name="name">Student List request</field>
        <field name="model_id" ref="model_education_student"/>
        <field name="groups" eval="[(4, ref('group_education_teacher_dc'))]"/>
        <field name="domain_force">[('major_id','=',user.employee_ids.department_id.ids)]</field>
    </record>

    <!--  set domain for student signup -->
    <record id="student_login_rule" model="ir.rule">
       <field name="name">Application for student</field>
       <field name="model_id" ref="model_education_application"/>
       <field name="groups" eval="[(4, ref('group_education_student'))]"/>
       <field name="perm_read" eval="True"/>
       <field name="perm_write" eval="True"/>
       <field name="perm_create" eval="False"/>
       <field name="perm_unlink" eval="False"/>
       <field name="domain_force">[('email','=',user.login)]</field>
    </record> 

    <record id="education_core.education_year_ending_menu" model="ir.ui.menu">
        <field name="name">Year Ending</field>
        <field name="groups_id" eval="[(4,ref('group_education_aa'))]"/>
    </record>

    <!-- Set domain for timetable (student)-->
    <record id="student_timetable_request_rule" model="ir.rule">
        <field name="name">Student timetable request</field>
        <field name="model_id" ref="model_education_timetable"/>
        <field name="groups" eval="[(4, ref('group_education_student'))]"/>
        <field name="domain_force">[('class_division.student_ids.partner_id','in', user.partner_id.ids)]</field>
    </record> 
    <record id="student_timetable_schedule_request_rule" model="ir.rule">
        <field name="name">Student timetable schedule request</field>
        <field name="model_id" ref="model_education_timetable_schedule"/>
        <field name="groups" eval="[(4, ref('group_education_student'))]"/>
        <field name="domain_force">[('class_division.student_ids.partner_id','in', user.partner_id.ids)]</field>
    </record>

     <!-- Set domain for exam (student)-->
    <record id="student_exam_request_rule" model="ir.rule">
        <field name="name">Student exam request</field>
        <field name="model_id" ref="model_education_exam"/>
        <field name="groups" eval="[(4, ref('group_education_student'))]"/>
        <field name="domain_force">[('division_id.student_ids.partner_id','in', user.partner_id.ids)]</field>
    </record>  
    <record id="student_exam_results_request_rule" model="ir.rule">
        <field name="name">Student exam result request</field>
        <field name="model_id" ref="model_education_exam_results"/>
        <field name="groups" eval="[(4, ref('group_education_student'))]"/>
        <field name="domain_force">[('student_id.partner_id','=', user.partner_id.ids)]</field>
    </record> 
     <record id="student_exam_report_request_rule" model="ir.rule">
        <field name="name">Student exam report request</field>
        <field name="model_id" ref="model_results_subject_line"/>
        <field name="groups" eval="[(4, ref('group_education_student'))]"/>
        <field name="domain_force">[('student_id.partner_id','=', user.partner_id.ids)]</field>
    </record>  
</odoo>